{% extends "base.html" %}

{% block title %}Login{% endblock %}

{% block content %}
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',system-ui,-apple-system,sans-serif}
.login-wrapper{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px;background:linear-gradient(135deg,#f0f9ff 0%,#e0f2fe 100%);position:relative;overflow-x:hidden}
.login-wrapper::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 10% 20%,rgba(59,130,246,0.08) 0%,transparent 20%),radial-gradient(circle at 90% 80%,rgba(139,92,246,0.08) 0%,transparent 20%),radial-gradient(circle at 50% 30%,rgba(34,197,94,0.05) 0%,transparent 30%);z-index:0;animation:float 20s ease-in-out infinite}
@keyframes float{0%,100%{transform:translate(0,0) rotate(0)}33%{transform:translate(-10px,-10px) rotate(1deg)}66%{transform:translate(10px,10px) rotate(-1deg)}}
.login-box{width:100%;max-width:420px;background:rgba(255,255,255,0.98);backdrop-filter:blur(8px);border-radius:20px;box-shadow:0 8px 30px rgba(0,0,0,0.08),0 3px 10px rgba(59,130,246,0.08),inset 0 1px 0 rgba(255,255,255,0.8);padding:40px;border:0.5px solid rgba(59,130,246,0.15);position:relative;z-index:1;animation:slideUp 0.5s ease-out}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.login-box::before{content:'';position:absolute;top:0;right:0;width:60px;height:60px;background:linear-gradient(135deg,transparent 50%,rgba(59,130,246,0.08) 50%);border-radius:0 20px 0 0;z-index:-1}
.login-heading{text-align:center;color:#1e293b;margin-bottom:32px;font-size:28px;font-weight:700;letter-spacing:-0.5px;background:linear-gradient(135deg,#3b82f6,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.input-group{margin-bottom:24px}
.input-label{display:block;margin-bottom:8px;color:#475569;font-weight:600;font-size:14px;letter-spacing:0.3px}
.form-input{width:100%;padding:14px 16px;border:1.5px solid #e2e8f0;border-radius:10px;font-size:16px;transition:all 0.2s ease;background:white;color:#1e293b}
.form-input:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,0.12)}
.form-input::placeholder{color:#94a3b8}
.form-input:invalid:not(:focus):not(:placeholder-shown){border-color:#ef4444;box-shadow:0 0 0 3px rgba(239,68,68,0.08)}
.form-input:valid:not(:focus):not(:placeholder-shown){border-color:#10b981;box-shadow:0 0 0 3px rgba(16,185,129,0.08)}
.submit-btn{width:100%;padding:16px;background:linear-gradient(135deg,#3b82f6,#8b5cf6);color:white;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;position:relative;overflow:hidden;letter-spacing:0.5px;margin-top:8px}
.submit-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:0.5s}
.submit-btn:hover::before{left:100%}
.submit-btn:hover{background:linear-gradient(135deg,#2563eb,#7c3aed);transform:translateY(-2px);box-shadow:0 8px 25px rgba(59,130,246,0.25)}
.submit-btn:active{transform:translateY(0)}
.forgot-section{text-align:center;margin:24px 0;padding:16px;background:rgba(248,250,252,0.8);border-radius:10px;border:0.5px solid rgba(226,232,240,0.4)}
.forgot-text{color:#64748b;font-size:14px;margin-right:8px}
.forgot-link{color:#3b82f6;font-weight:600;text-decoration:none;font-size:14px;padding:6px 12px;border-radius:6px;background:rgba(59,130,246,0.1);transition:all 0.2s ease;display:inline-block}
.forgot-link:hover{background:rgba(59,130,246,0.2);color:#1d4ed8;text-decoration:none}
.login-footer{text-align:center;margin-top:32px;padding-top:24px;border-top:0.5px solid rgba(226,232,240,0.4);color:#64748b;font-size:15px}
.register-link{color:#3b82f6;text-decoration:none;font-weight:600;transition:all 0.2s ease;margin-left:6px}
.register-link:hover{color:#1d4ed8;text-decoration:underline}

/* RESPONSIVE - Mobile Focused */
@media (max-width:768px){
    .login-wrapper{padding:10px}
    .login-box{padding:28px;max-width:380px;border-radius:18px;border:0.5px solid rgba(59,130,246,0.12)}
    .login-heading{font-size:26px;margin-bottom:26px}
    .login-box::before{width:50px;height:50px}
    .form-input{border-width:1.5px;border-radius:9px}
    .forgot-section{border-width:0.5px;margin:22px 0}
}
@media (max-width:480px){
    .login-wrapper{padding:6px;background:linear-gradient(135deg,#f0f9ff 0%,#dbeafe 100%)}
    .login-box{padding:22px;border-radius:16px;border:0.5px solid rgba(59,130,246,0.1);box-shadow:0 6px 25px rgba(0,0,0,0.06),0 2px 6px rgba(59,130,246,0.06)}
    .login-heading{font-size:24px;margin-bottom:22px}
    .input-group{margin-bottom:18px}
    .form-input{padding:15px;font-size:16px;border-radius:10px;border-width:1.5px}
    .submit-btn{padding:17px;font-size:16px;border-radius:10px}
    .forgot-section{margin:20px 0;padding:13px;border-width:0.5px}
    .login-footer{margin-top:22px;padding-top:18px;border-top-width:0.5px}
    .login-box::before{width:45px;height:45px}
}
@media (max-width:360px){
    .login-box{padding:20px;max-width:340px}
    .login-heading{font-size:22px;margin-bottom:20px}
    .form-input{padding:14px;border-width:1.5px}
    .submit-btn{padding:16px}
    .login-box::before{width:40px;height:40px}
}
@media (max-height:600px) and (orientation:landscape){
    .login-wrapper{align-items:flex-start;padding-top:15px;padding-bottom:15px}
    .login-box{margin:8px 0;padding:20px;max-width:360px}
    .login-heading{margin-bottom:18px;font-size:24px}
    .input-group{margin-bottom:14px}
}
@media (min-width:1200px){
    .login-box{max-width:440px;padding:48px}
    .login-heading{font-size:30px}
    .form-input{padding:16px 18px;font-size:16px}
    .submit-btn{padding:18px;font-size:17px}
}
@media (hover:none) and (pointer:coarse){
    .submit-btn:hover{transform:none;box-shadow:none}
    .submit-btn:active{transform:scale(0.98)}
    .form-input:focus{box-shadow:0 0 0 2px rgba(59,130,246,0.15)}
}
</style>

<div class="login-wrapper">
    <div class="login-box">
        <h1 class="login-heading">Login</h1>
        <form method="POST" class="login-form">
            <div class="input-group">
                <label for="phone" class="input-label">Mobile Number</label>
                <input type="tel" id="phone" name="phone" class="form-input" placeholder="Enter 10-digit mobile number" required pattern="[0-9]{10}" inputmode="numeric" maxlength="10">
            </div>
            <div class="input-group">
                <label for="password" class="input-label">Password</label>
                <input type="password" id="password" name="password" class="form-input" placeholder="Enter your password" required minlength="6">
            </div>
            <button type="submit" class="submit-btn">Login</button>
            <div class="forgot-section">
                <span class="forgot-text">Forgot your password?</span>
                <a href="https://bite-me-buddy-user.onrender.com" target="_blank" class="forgot-link">Reset Here</a>
            </div>
            <div class="login-footer">
                Don't have an account?
                <a href="{{ url_for('register') }}" class="register-link">Create Account</a>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded',function(){
    const phoneInput=document.getElementById('phone'),passwordInput=document.getElementById('password'),form=document.querySelector('.login-form');
    if(phoneInput){
        phoneInput.addEventListener('input',function(e){
            let value=e.target.value.replace(/\D/g,'');
            if(value.length>10)value=value.substring(0,10);
            e.target.value=value
        });
        phoneInput.addEventListener('focus',function(){
            if('virtualKeyboard'in navigator)navigator.virtualKeyboard.show()
        })
    }
    if(form){
        form.addEventListener('submit',function(e){
            if(phoneInput&&phoneInput.value.length!==10){
                e.preventDefault();alert('Please enter a valid 10-digit mobile number');phoneInput.focus();phoneInput.style.borderColor='#ef4444';return false
            }
            if(passwordInput&&passwordInput.value.length<6){
                e.preventDefault();alert('Password must be at least 6 characters long');passwordInput.focus();passwordInput.style.borderColor='#ef4444';return false
            }
            return true
        })
    }
    if(phoneInput){
        phoneInput.addEventListener('blur',function(){
            if(this.value.length===10)this.style.borderColor='#10b981';
            else if(this.value.length>0)this.style.borderColor='#ef4444';
            else this.style.borderColor='#e2e8f0'
        })
    }
    if(passwordInput){
        passwordInput.addEventListener('blur',function(){
            if(this.value.length>=6)this.style.borderColor='#10b981';
            else if(this.value.length>0)this.style.borderColor='#ef4444';
            else this.style.borderColor='#e2e8f0'
        })
    }
    setTimeout(()=>{
        if(phoneInput&&window.innerWidth<=768)phoneInput.focus()
    },300);
    document.addEventListener('touchstart',function(e){
        if(e.target.type==='text'||e.target.type==='tel'||e.target.type==='password')e.target.style.fontSize='16px'
    })
})
</script>
{% endblock %}